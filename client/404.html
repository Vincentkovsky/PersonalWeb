<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Redirecting...</title>
    <script>
      // 获取仓库名，以便正确重定向
      const repoName = "PersonalWeb"; // 您的仓库名
      const pathSegments = window.location.pathname.split("/").filter(Boolean);
      let basePath = "/";

      // 如果路径中包含仓库名（GitHub Pages部署），则保留它
      if (pathSegments.includes(repoName)) {
        basePath = `/${repoName}/`;
      }

      // 构造新的URL，保留查询参数和哈希值
      const redirectPath = window.location.pathname.replace(
        new RegExp(`^${basePath.replace(/\//g, "\\/")}`),
        ""
      );
      const newUrl = `${window.location.origin}${basePath}?redirect=${encodeURIComponent(
        redirectPath
      )}${window.location.search}${window.location.hash}`;

      // 执行重定向
      window.location.href = newUrl;
    </script>
  </head>
  <body>
    <p>
      If you are not redirected automatically, please <a id="redirect-link" href="#">click here</a>.
    </p>
    <script>
      // 更新链接的href，以防脚本阻塞
      document.getElementById("redirect-link").href = newUrl;
    </script>
  </body>
</html>
